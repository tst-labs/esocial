{"openapi":"3.0.1","info":{"title":"esocial-jt-service","description":"Serviço responsável pelo o ciclo de envio e consulta de processamento dos eventos enviados ao eSocial-Gov","contact":{"name":"tst-labs/esocial","url":"https://github.com/tst-labs/esocial"},"version":"0.0.1-SNAPSHOT"},"servers":[{"url":"http://localhost:8080/esocial-jt-service","description":"Generated server url"}],"paths":{"/xml/acoes/assinar":{"post":{"tags":["assinatura-xml-resource"],"summary":"Recebe um xml de evento do eSocial e assina usando o certificado digital da aplicação.","operationId":"assinar","requestBody":{"content":{"text/xml;charset=UTF-8":{"schema":{"type":"string"}}},"required":true},"responses":{"200":{"description":"OK","content":{"text/xml;charset=UTF-8":{"schema":{"type":"string"}}}}}}},"/producao-restrita/acoes/limpar":{"post":{"tags":["producao-restrita-resource"],"summary":"Envia um comando para limpar a base de produção restrita no eSocial-Gov e reinicia a base de dados local.","operationId":"limparProducaoRestrita","parameters":[{"name":"cnpj","in":"query","description":"Se nulo, usa o CNPJ do empregador.","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/Evento"}}}}}}},"/ocorrencias":{"get":{"tags":["ocorrencia-resource"],"summary":"Consulta todas as ocorrências já recebidas pelo sistema, exibindo informações completas.","operationId":"listarTodos","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Ocorrencia"}}}}}}},"post":{"tags":["ocorrencia-resource"],"summary":"Url única para o recebimento de ocorrências. O tipo da ocorrência é passado no próprio json dos dados e deve obedecer ao formato respectivo àquele tipo.","operationId":"receber","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OcorrenciaDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/Ocorrencia"}}}}}}},"/lote/acoes/enviar":{"post":{"tags":["lote-resource"],"summary":"Fornece para outras aplicações o serviço de envio do xml contendo um lote do eSocial para o eSocial-Gov. Este serviço faz o encapsulamento do protocolo SOAP e envia o lote por uma conexão HTTPS usando o certificado digital da aplicação.","operationId":"enviarParaEsocialGov","requestBody":{"content":{"text/xml;charset=UTF-8":{"schema":{"type":"string"}}},"required":true},"responses":{"200":{"description":"OK","content":{"text/xml;charset=UTF-8":{"schema":{"type":"string"}}}}}}},"/lote/acoes/atualizar-processamento":{"post":{"tags":["lote-resource"],"summary":"Busca no eSocial-Gov o resultado do processamento de todos os lotes que ainda estão pendentes e registra os sucessos e erros no sistema local. Esta api só deve ser usada quando o processamento automático está desabilitado.","operationId":"atualizarProcessamentoTodosEmProcessamento","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Lote"}}}}}}}},"/lote/acoes/atualizar-processamento/{protocolo}":{"post":{"tags":["lote-resource"],"summary":"Busca no eSocial-Gov o resultado do processamento para um lote com protocolo específico e registra os sucessos e erros no sistema local. Esta api só deve ser usada quando o processamento automático está desabilitado.","operationId":"atualizarProcessamentoEvento","parameters":[{"name":"protocolo","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Lote"}}}}}}}},"/eventos/acoes/enviar":{"post":{"tags":["evento-resource"],"summary":"Envia (ou reenvia) manualmente um evento para o eSocial-Gov.","operationId":"enviarTodosEventos","parameters":[{"name":"id","in":"query","description":"Id do evento (não confundir com a id da ocorrência)","required":false,"schema":{"type":"array","items":{"type":"integer","format":"int64"},"default":[]},"example":1},{"name":"tipo","in":"query","description":"Tipo do evento. [1000, 1005, 1010, 1020, 1030, 1035, 1040, 1050, 1060, 1070, 2200, etc]","required":false,"schema":{"type":"array","items":{"type":"integer","format":"int64"},"default":[]},"example":1000},{"name":"estado","in":"query","description":"Estado atual do evento. [1 (EM_FILA), 2 (PROCESSAMENTO), 3 (PROCESSADO_COM_SUCESSO), 4 (PROCESSADO_COM_ERRO), 5 (ERRO)]","required":false,"schema":{"type":"array","items":{"type":"integer","format":"int64"},"default":[]},"example":1},{"name":"grupo","in":"query","description":"Grupo do evento. Valores possíveis [1 (TABELA), 2 (NAO_PERIODICO), 3 (PERIODICO)]","required":false,"schema":{"type":"array","items":{"type":"integer","format":"int64"},"default":[]},"example":1}],"responses":{"200":{"description":"OK","content":{"application/json;charset=UTF-8":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Evento"}}}}}}}},"/automacao":{"get":{"tags":["automacao-resource"],"summary":"Consulta o status do processamento automático da aplicação.","operationId":"getStatus","responses":{"200":{"description":"OK","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/StatusAutomacao"}}}}}},"post":{"tags":["automacao-resource"],"summary":"Configura o processamento automático da aplicação.","operationId":"habilitarAutomacao","parameters":[{"name":"habilitado","in":"query","description":"Habilita ou desabilita a execução automática. Valores válidos [true, false]","required":false,"schema":{"type":"boolean","default":true},"example":true},{"name":"periodo","in":"query","description":"Período em milisegundos entre cada ciclo de execução","required":false,"schema":{"type":"integer","format":"int64"},"example":10000}],"responses":{"200":{"description":"OK","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/StatusAutomacao"}}}}}}},"/ocorrencias/{id}":{"get":{"tags":["ocorrencia-resource"],"summary":"Consulta uma ocorrência especificada pelo id.","operationId":"getOcorrenciaPorId","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Ocorrencia"}}}}}}},"/ocorrencias/paginado":{"get":{"tags":["ocorrencia-resource"],"summary":"Consulta, com paginação, todas as ocorrências já recebidas pelo sistema, exibindo informações completas.","operationId":"listarPaginado","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":20}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageOcorrencia"}}}}}}},"/ocorrencias/exemplos":{"get":{"tags":["ocorrencia-resource"],"summary":"Lista URLs com exemplos disponíveis para como uma ocorrência deve ser enviada para o /esocial-jt-service/ocorrencias.","operationId":"getExemplo","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"type":"string"}}}}}}}},"/ocorrencias/exemplos/{tipo}":{"get":{"tags":["ocorrencia-resource"],"summary":"Retorna o modelo de JSON para cada tipo de ocorrência que deve ser enviada para o /esocial-jt-service/ocorrencias.","operationId":"getExemplosPorTipo","parameters":[{"name":"tipo","in":"path","required":true,"schema":{"type":"string","enum":["INFORMACOES_EMPREGADOR","TABELA_ESTABELECIMENTO","TABELA_RUBRICA","TABELA_LOTACAO","TABELA_PROCESSO","ADMISSAO_TRABALHADOR","CESSAO","ALTERACAO_CADASTRAL","ALTERACAO_CONTRATUAL","AFASTAMENTO_TEMPORARIO","DESLIGAMENTO","REINTEGRACAO","TSV_INICIO","TSV_ALTERACAO_CONTRATUAL","TSV_TERMINO","CADASTRO_BENEFICIARIO_INI","CADASTRO_BENEFICIARIO_ALT","CADASTRO_BENEFICIO_INI","CADASTRO_BENEFICIO_ALT","CADASTRO_BENEFICIO_TERM","REATIVACAO_BENEFICIO","REMUNERACAO_RGPS","REMUNERACAO_RPPS","BENEFICIO_RPPS","PAGAMENTOS","REABERTURA_PERIODICOS","FECHAMENTO_PERIODICOS","EXCLUSAO"]}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OcorrenciaDTO"}}}}}}},"/ocorrencias/dados-basicos":{"get":{"tags":["ocorrencia-resource"],"summary":"Consulta todas as ocorrências já recebidas pelo sistema, exibindo informações simplificadas. Esta consulta tende a ser mais rápida que a consulta de dados completos.","operationId":"listarDadosBasicos","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OcorrenciaDadosBasicosDTO"}}}}}}}},"/lote/consulta/{protocolo}":{"get":{"tags":["lote-resource"],"summary":"Consulta o xml de resposta de processamento diretamente eSocial-Gov. Esta consulta não causa nenhuma alteração no sistema local.","operationId":"consultaProtocolo","parameters":[{"name":"protocolo","in":"path","description":"Número de protocolo retornado pelo eSocial-Gov após o envio de um lote","required":true,"schema":{"type":"string"},"example":"1.2.201711.0000000000000062303"}],"responses":{"200":{"description":"OK","content":{"text/xml;charset=UTF-8":{"schema":{"type":"string"}}}}}}}},"components":{"schemas":{"CodigoResposta":{"required":["codGrupoResposta","codResposta"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"desResposta":{"maxLength":300,"minLength":0,"type":"string"},"codGrupoResposta":{"type":"integer","format":"int32"},"codResposta":{"type":"integer","format":"int64"}}},"DadosOcorrencia":{"required":["ideEmpregador","tipo"],"type":"object","properties":{"ideEmpregador":{"$ref":"#/components/schemas/IdeEmpregador"},"tipo":{"type":"string"}},"discriminator":{"propertyName":"tipo"}},"EnvioEvento":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"lote":{"$ref":"#/components/schemas/Lote"},"codRespostaProcessamento":{"$ref":"#/components/schemas/CodigoResposta"},"dtaGeracaoEvento":{"type":"string","format":"date-time"},"versao":{"type":"string"},"erroInterno":{"type":"string"},"errosProcessamento":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/ErroProcessamento"}}}},"ErroProcessamento":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"descricao":{"maxLength":4000,"minLength":0,"type":"string"},"localizacao":{"maxLength":300,"minLength":0,"type":"string"},"tipoErroProcessamento":{"$ref":"#/components/schemas/TipoErroProcessamento"},"codMensagem":{"type":"integer","format":"int64"},"loacalizacao":{"$ref":"#/components/schemas/ErroProcessamento"}}},"Estado":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"descricao":{"type":"string"}}},"Evento":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"ocorrencia":{"$ref":"#/components/schemas/Ocorrencia"},"estado":{"$ref":"#/components/schemas/Estado"},"idEvento":{"maxLength":36,"minLength":0,"type":"string"},"tipoEvento":{"$ref":"#/components/schemas/TipoEvento"},"enviosEvento":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/EnvioEvento"}},"nrRecibo":{"maxLength":40,"minLength":0,"type":"string"},"eventoTotalizador":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/EventoTotalizador"}}}},"EventoTotalizador":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"tipo":{"maxLength":5,"minLength":0,"type":"string"},"nrReciboArquivoBase":{"maxLength":40,"minLength":0,"type":"string"},"indApuracao":{"type":"string","format":"byte"},"perApuracao":{"maxLength":7,"minLength":0,"type":"string"},"cpfTrabalhador":{"type":"string"},"xmlEventoTotalizador":{"type":"string"}}},"GrupoTipoEvento":{"required":["id"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"descricao":{"maxLength":100,"minLength":0,"type":"string"}}},"IdeEmpregador":{"required":["nrInsc","tpInsc"],"type":"object","properties":{"tpInsc":{"type":"string","format":"byte"},"nrInsc":{"pattern":"\\d{8,15}","type":"string"}}},"Lote":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"estado":{"$ref":"#/components/schemas/Estado"},"codigoResposta":{"$ref":"#/components/schemas/CodigoResposta"},"dtaEnvio":{"type":"string","format":"date-time"},"protocolo":{"type":"string"},"retorno":{"type":"string"},"resposta":{"$ref":"#/components/schemas/CodigoResposta"}}},"Ocorrencia":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"tipoOcorrencia":{"type":"string","enum":["INFORMACOES_EMPREGADOR","TABELA_ESTABELECIMENTO","TABELA_RUBRICA","TABELA_LOTACAO","TABELA_PROCESSO","ADMISSAO_TRABALHADOR","CESSAO","ALTERACAO_CADASTRAL","ALTERACAO_CONTRATUAL","AFASTAMENTO_TEMPORARIO","DESLIGAMENTO","REINTEGRACAO","TSV_INICIO","TSV_ALTERACAO_CONTRATUAL","TSV_TERMINO","CADASTRO_BENEFICIARIO_INI","CADASTRO_BENEFICIARIO_ALT","CADASTRO_BENEFICIO_INI","CADASTRO_BENEFICIO_ALT","CADASTRO_BENEFICIO_TERM","REATIVACAO_BENEFICIO","REMUNERACAO_RGPS","REMUNERACAO_RPPS","BENEFICIO_RPPS","PAGAMENTOS","REABERTURA_PERIODICOS","FECHAMENTO_PERIODICOS","EXCLUSAO"]},"referencia":{"type":"string"},"operacao":{"type":"string","enum":["INCLUSAO","ALTERACAO","EXCLUSAO","NORMAL","RETIFICACAO"]},"retificarRecibo":{"type":"string"},"dataOcorrencia":{"type":"string","format":"date-time"},"dataRecebimento":{"type":"string","format":"date-time"},"txtDadosOcorrencia":{"$ref":"#/components/schemas/Ocorrencia"},"dadosOcorrencia":{"$ref":"#/components/schemas/DadosOcorrencia"},"evento":{"$ref":"#/components/schemas/Evento"}}},"TipoErroProcessamento":{"required":["id"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"descricao":{"maxLength":15,"minLength":0,"type":"string"}}},"TipoEvento":{"type":"object","properties":{"desTipo":{"maxLength":100,"minLength":0,"type":"string"},"grupoTipoEvento":{"$ref":"#/components/schemas/GrupoTipoEvento"},"codTipo":{"type":"integer","format":"int64"}}},"OcorrenciaDTO":{"type":"object","properties":{"tipoOcorrencia":{"type":"string","enum":["INFORMACOES_EMPREGADOR","TABELA_ESTABELECIMENTO","TABELA_RUBRICA","TABELA_LOTACAO","TABELA_PROCESSO","ADMISSAO_TRABALHADOR","CESSAO","ALTERACAO_CADASTRAL","ALTERACAO_CONTRATUAL","AFASTAMENTO_TEMPORARIO","DESLIGAMENTO","REINTEGRACAO","TSV_INICIO","TSV_ALTERACAO_CONTRATUAL","TSV_TERMINO","CADASTRO_BENEFICIARIO_INI","CADASTRO_BENEFICIARIO_ALT","CADASTRO_BENEFICIO_INI","CADASTRO_BENEFICIO_ALT","CADASTRO_BENEFICIO_TERM","REATIVACAO_BENEFICIO","REMUNERACAO_RGPS","REMUNERACAO_RPPS","BENEFICIO_RPPS","PAGAMENTOS","REABERTURA_PERIODICOS","FECHAMENTO_PERIODICOS","EXCLUSAO"]},"referencia":{"type":"string"},"operacao":{"type":"string","enum":["INCLUSAO","ALTERACAO","EXCLUSAO","NORMAL","RETIFICACAO"]},"retificarRecibo":{"type":"string"},"dataOcorrencia":{"type":"string","format":"date-time"},"dadosOcorrencia":{"$ref":"#/components/schemas/DadosOcorrencia"}}},"StatusAutomacao":{"type":"object","properties":{"descricao":{"type":"string","description":"Nome do executor do processamento automático"},"habilitado":{"type":"boolean","description":"Indica se a execução está habilitada."},"periodoMilis":{"type":"integer","description":"Período em milisegundos entre cada ciclo de execução","format":"int64"}}},"PageOcorrencia":{"type":"object","properties":{"totalElements":{"type":"integer","format":"int64"},"totalPages":{"type":"integer","format":"int32"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/Ocorrencia"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/Sort"},"numberOfElements":{"type":"integer","format":"int32"},"first":{"type":"boolean"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"last":{"type":"boolean"},"empty":{"type":"boolean"}}},"PageableObject":{"type":"object","properties":{"offset":{"type":"integer","format":"int64"},"sort":{"$ref":"#/components/schemas/Sort"},"pageNumber":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"paged":{"type":"boolean"},"unpaged":{"type":"boolean"}}},"Sort":{"type":"object","properties":{"empty":{"type":"boolean"},"sorted":{"type":"boolean"},"unsorted":{"type":"boolean"}}},"OcorrenciaDadosBasicosDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"tipo":{"type":"string","enum":["INFORMACOES_EMPREGADOR","TABELA_ESTABELECIMENTO","TABELA_RUBRICA","TABELA_LOTACAO","TABELA_PROCESSO","ADMISSAO_TRABALHADOR","CESSAO","ALTERACAO_CADASTRAL","ALTERACAO_CONTRATUAL","AFASTAMENTO_TEMPORARIO","DESLIGAMENTO","REINTEGRACAO","TSV_INICIO","TSV_ALTERACAO_CONTRATUAL","TSV_TERMINO","CADASTRO_BENEFICIARIO_INI","CADASTRO_BENEFICIARIO_ALT","CADASTRO_BENEFICIO_INI","CADASTRO_BENEFICIO_ALT","CADASTRO_BENEFICIO_TERM","REATIVACAO_BENEFICIO","REMUNERACAO_RGPS","REMUNERACAO_RPPS","BENEFICIO_RPPS","PAGAMENTOS","REABERTURA_PERIODICOS","FECHAMENTO_PERIODICOS","EXCLUSAO"]},"data":{"type":"string","format":"date-time"},"estadoEvento":{"$ref":"#/components/schemas/Estado"},"tipoEvento":{"$ref":"#/components/schemas/TipoEvento"}}}}}}